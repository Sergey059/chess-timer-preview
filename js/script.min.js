(()=>{"use strict";const e=function(){var e=document.getElementById("popup-settings");e.classList.contains("active")&&e.classList.remove("active")},t=function(e){var t=document.getElementById("game-over"),n=document.getElementById("game-over-text");t.classList.add("active"),n.textContent=1===e?"Белые ":"Черные "},n=function(e){var t=new Audio("tick.mp3");e>0&&e<=5?t.play():(t.pause(),t.currentTime=0)},d=function(){!function(e){var d=document.getElementById("preload"),a=document.getElementById("timer-preload"),c=new Audio("tick.mp3"),i=new Audio("gong.mp3");d.classList.add("active");var o=setInterval((function(){a.textContent=e,c.currentTime=0,c.play(),--e<0&&(clearInterval(o),c.currentTime=0,i.play(),a.textContent="Старт",setTimeout((function(){d.classList.remove("active"),a.textContent=""}),500),function(){var e=document.getElementById("start-pause"),d=document.getElementById("gamer-1-btn"),a=document.getElementById("gamer-2-btn"),c=document.getElementById("gamer-white").parentElement,i=document.getElementById("gamer-black").parentElement,o=document.getElementById("swap-inputs"),s=document.getElementById("white-timer"),m=document.getElementById("black-timer"),l=new Audio("drumroll.mp3"),u=1,r=!0,v=10,g=10,y=null;function E(){document.querySelector("body").classList.add("active"),y=setInterval((function(){r||(1===u?(v--,d.classList.add("active"),c.classList.add("active"),s.textContent=v,d.disabled=!1,n(v),2===v&&l.play(),v<=0&&(clearInterval(y),t(u))):(g--,a.classList.add("active"),i.classList.add("active"),m.textContent=g,a.disabled=!1,n(g),2===g&&l.play(),g<=0&&(clearInterval(y),t(u))))}),1e3)}function I(){r=!0,clearInterval(y),1===u?(v=10,u=2,m.textContent=g,a.classList.add("active"),i.classList.add("active"),d.classList.remove("active"),c.classList.remove("active"),a.disabled=!1,d.disabled=!0,l.pause(),l.currentTime=0):(g=10,u=1,s.textContent=v,d.classList.add("active"),c.classList.add("active"),a.classList.remove("active"),i.classList.remove("active"),a.disabled=!0,d.disabled=!1,l.pause(),l.currentTime=0),r=!1,E()}u=1,r=!1,E(),e.addEventListener("click",(function(){r=!r,document.getElementById("start-pause").textContent=r?"Старт":"Pause"})),d.addEventListener("click",I),a.addEventListener("click",I),document.addEventListener("keydown",(function(e){"ControlLeft"===e.code&&1===u&&I(),"ControlRight"===e.code&&2===u&&I()})),e.textContent="Pause",o.classList.remove("active"),s.textContent=v,m.textContent=g,console.log(r)}())}),1e3)}(3)},a=function(){var e=document.getElementById("gamer-1"),t=document.getElementById("gamer-2"),n=document.getElementById("timer"),d=document.getElementById("key-1"),a=document.getElementById("key-2"),c={gamer1:e.value,gamer2:t.value,timer:n.value,key1:d.textContent,key2:a.textContent};localStorage.setItem("myData",JSON.stringify(c))},c=function(){var e=document.getElementById("popup-settings");e&&e.classList.add("active")},i=function(){var e=document.getElementById("gamer-1").value,t=document.getElementById("gamer-2").value;document.getElementById("gamer-1").value=t,document.getElementById("gamer-2").value=e};window.addEventListener("DOMContentLoaded",(function(){window.addEventListener("load",(function(){var t,n,o,s;document.getElementById("open-settings").addEventListener("click",c),document.querySelector("#swap-popup-inputs").addEventListener("click",i),document.getElementById("save-settings").addEventListener("click",a),document.getElementById("save-settings").addEventListener("click",e),document.getElementById("start-pause").addEventListener("click",d),t=document.getElementById("keys-popup"),n=document.getElementById("key-1"),o=document.getElementById("key-2"),s=function(e){t.classList.add("active"),document.addEventListener("keydown",(function n(d){var a=d.code;e.textContent=a,t.classList.remove("active"),document.removeEventListener("keydown",n)}))},document.getElementById("key-1").addEventListener("click",(function(){s(n)})),document.getElementById("key-2").addEventListener("click",(function(){s(o)}))}))}))})();